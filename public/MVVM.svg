<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2200 2000" width="2200" height="2000">
  <defs>
    <!-- Modern Gradients from thread.txt -->
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#1e1b4b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#020617;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="uiCardGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1e293b;stop-opacity:0.6" />
      <stop offset="100%" style="stop-color:#0f172a;stop-opacity:0.8" />
    </linearGradient>

    <linearGradient id="externalCardGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#450a0a;stop-opacity:0.6" />
      <stop offset="100%" style="stop-color:#2a0a0a;stop-opacity:0.8" />
    </linearGradient>

    <linearGradient id="nodeGradientUI" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#334155;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1e293b;stop-opacity:1" />
    </linearGradient>

    <linearGradient id="nodeGradientVM" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4338ca;stop-opacity:0.8" />
      <stop offset="100%" style="stop-color:#312e81;stop-opacity:0.8" />
    </linearGradient>

    <linearGradient id="nodeGradientRepo" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#047857;stop-opacity:0.6" />
      <stop offset="100%" style="stop-color:#064e3b;stop-opacity:0.6" />
    </linearGradient>

    <linearGradient id="nodeGradientExternal" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#b91c1c;stop-opacity:0.6" />
      <stop offset="100%" style="stop-color:#7f1d1d;stop-opacity:0.6" />
    </linearGradient>

    <!-- Glow Filter -->
    <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Soft Shadow -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="rgba(0,0,0,0.4)"/>
    </filter>
    
    <!-- Subtle Grid -->
    <pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse">
      <path d="M 50 0 L 0 0 0 50" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1"/>
    </pattern>
    
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8" />
    </marker>
    
    <marker id="arrowhead-flow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M2,2 L10,6 L2,10 L2,2" fill="#38bdf8" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="100%" height="100%" fill="url(#bgGradient)"/>
  <rect width="100%" height="100%" fill="url(#grid)" />

  <!-- Header -->
  <text x="1100" y="80" text-anchor="middle" font-family="Inter, Roboto, sans-serif" font-size="48" font-weight="800" fill="#f8fafc" filter="url(#glow)">
    StudySage Architecture
  </text>
  <text x="1100" y="120" text-anchor="middle" font-family="Inter, Roboto, sans-serif" font-size="20" fill="#94a3b8" letter-spacing="2">
    COMPREHENSIVE MVVM COMPONENT MAP &amp; DATA FLOW
  </text>

  <!-- LAYER LABELS (Left Side) -->
  <g transform="translate(50, 0)">
    <text x="0" y="300" font-family="Inter, sans-serif" font-size="24" font-weight="700" fill="#38bdf8" transform="rotate(-90 20,300)">VIEW LAYER</text>
    <text x="0" y="750" font-family="Inter, sans-serif" font-size="24" font-weight="700" fill="#818cf8" transform="rotate(-90 20,750)">VIEWMODEL LAYER</text>
    <text x="0" y="1200" font-family="Inter, sans-serif" font-size="24" font-weight="700" fill="#34d399" transform="rotate(-90 20,1200)">DATA LAYER</text>
    <text x="0" y="1650" font-family="Inter, sans-serif" font-size="24" font-weight="700" fill="#f87171" transform="rotate(-90 20,1650)">EXTERNAL</text>
  </g>

  <!-- ================================================================================== -->
  <!-- COLUMN 1: AUTH & PROFILE -->
  <!-- ================================================================================== -->
  <g transform="translate(150, 180)">
    <!-- Container -->
    <rect width="280" height="1350" rx="24" fill="url(#uiCardGradient)" stroke="rgba(56, 189, 248, 0.2)" stroke-width="1" filter="url(#shadow)"/>
    <text x="140" y="40" text-anchor="middle" font-family="Inter, sans-serif" font-size="22" font-weight="700" fill="#e2e8f0">Auth &amp; Profile</text>

    <!-- Views -->
    <g transform="translate(20, 80)">
      <rect width="240" height="260" rx="12" fill="rgba(56, 189, 248, 0.05)" stroke="#38bdf8" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#38bdf8" font-weight="600">SCREENS</text>
      
      <g transform="translate(10, 40)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">SignInScreen / SignUpScreen</text>
      </g>
      <g transform="translate(10, 80)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">ProfileScreen</text>
      </g>
      <g transform="translate(10, 120)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">PrivacyScreen</text>
      </g>
      <g transform="translate(10, 160)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">NotificationsScreen</text>
      </g>
      <g transform="translate(10, 200)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">ChangePasswordDialog</text>
      </g>
    </g>

    <!-- ViewModels -->
    <g transform="translate(20, 450)">
      <rect width="240" height="200" rx="12" fill="rgba(129, 140, 248, 0.05)" stroke="#818cf8" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#818cf8" font-weight="600">VIEWMODELS</text>

      <g transform="translate(10, 40)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">AuthViewModel</text>
      </g>
      <g transform="translate(10, 90)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">ProfileViewModel</text>
      </g>
      <g transform="translate(10, 140)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">NotificationsViewModel</text>
      </g>
    </g>

    <!-- Repositories -->
    <g transform="translate(20, 900)">
      <rect width="240" height="120" rx="12" fill="rgba(52, 211, 153, 0.05)" stroke="#34d399" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#34d399" font-weight="600">REPOSITORIES</text>

      <g transform="translate(10, 40)">
        <rect width="220" height="60" rx="8" fill="url(#nodeGradientRepo)" stroke="#10b981" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#d1fae5">AuthRepository</text>
        <text x="110" y="45" text-anchor="middle" font-family="Inter, sans-serif" font-size="11" fill="#a7f3d0">Firebase Auth &amp; Firestore</text>
      </g>
    </g>
  </g>

  <!-- ================================================================================== -->
  <!-- COLUMN 2: HOME & DASHBOARD -->
  <!-- ================================================================================== -->
  <g transform="translate(450, 180)">
    <rect width="280" height="1350" rx="24" fill="url(#uiCardGradient)" stroke="rgba(56, 189, 248, 0.2)" stroke-width="1" filter="url(#shadow)"/>
    <text x="140" y="40" text-anchor="middle" font-family="Inter, sans-serif" font-size="22" font-weight="700" fill="#e2e8f0">Home &amp; Tasks</text>

    <!-- Views -->
    <g transform="translate(20, 80)">
      <rect width="240" height="200" rx="12" fill="rgba(56, 189, 248, 0.05)" stroke="#38bdf8" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#38bdf8" font-weight="600">SCREENS</text>
      
      <g transform="translate(10, 40)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">HomeScreen</text>
      </g>
      <g transform="translate(10, 80)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">RecentlyOpenedScreen</text>
      </g>
    </g>

    <!-- ViewModels -->
    <g transform="translate(20, 450)">
      <rect width="240" height="120" rx="12" fill="rgba(129, 140, 248, 0.05)" stroke="#818cf8" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#818cf8" font-weight="600">VIEWMODELS</text>

      <g transform="translate(10, 40)">
        <rect width="220" height="60" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">HomeViewModel</text>
        <text x="110" y="45" text-anchor="middle" font-family="Inter, sans-serif" font-size="11" fill="#c7d2fe">Dashboard &amp; Daily Tasks</text>
      </g>
    </g>

    <!-- Repositories -->
    <g transform="translate(20, 900)">
      <rect width="240" height="120" rx="12" fill="rgba(52, 211, 153, 0.05)" stroke="#34d399" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#34d399" font-weight="600">REPOSITORIES</text>

      <g transform="translate(10, 40)">
        <rect width="220" height="60" rx="8" fill="url(#nodeGradientRepo)" stroke="#10b981" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#d1fae5">TasksRepository</text>
        <text x="110" y="45" text-anchor="middle" font-family="Inter, sans-serif" font-size="11" fill="#a7f3d0">Daily Missions Logic</text>
      </g>
    </g>
  </g>

  <!-- ================================================================================== -->
  <!-- COLUMN 3: COURSES -->
  <!-- ================================================================================== -->
  <g transform="translate(750, 180)">
    <rect width="280" height="1350" rx="24" fill="url(#uiCardGradient)" stroke="rgba(56, 189, 248, 0.2)" stroke-width="1" filter="url(#shadow)"/>
    <text x="140" y="40" text-anchor="middle" font-family="Inter, sans-serif" font-size="22" font-weight="700" fill="#e2e8f0">Courses &amp; Canvas</text>

    <!-- Views -->
    <g transform="translate(20, 80)">
      <rect width="240" height="240" rx="12" fill="rgba(56, 189, 248, 0.05)" stroke="#38bdf8" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#38bdf8" font-weight="600">SCREENS</text>
      
      <g transform="translate(10, 40)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">CourseScreen</text>
      </g>
      <g transform="translate(10, 80)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">CourseDetailScreen</text>
      </g>
      <g transform="translate(10, 120)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">CourseDialog / AddCourse</text>
      </g>
      <g transform="translate(10, 160)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">CanvasIntegrationScreen</text>
      </g>
    </g>

    <!-- ViewModels -->
    <g transform="translate(20, 450)">
      <rect width="240" height="200" rx="12" fill="rgba(129, 140, 248, 0.05)" stroke="#818cf8" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#818cf8" font-weight="600">VIEWMODELS</text>

      <g transform="translate(10, 40)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">CourseViewModel</text>
      </g>
      <g transform="translate(10, 90)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">AddCourseViewModel</text>
      </g>
      <g transform="translate(10, 140)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">CanvasViewModel</text>
      </g>
    </g>

    <!-- Repositories -->
    <g transform="translate(20, 900)">
      <rect width="240" height="180" rx="12" fill="rgba(52, 211, 153, 0.05)" stroke="#34d399" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#34d399" font-weight="600">REPOSITORIES</text>

      <g transform="translate(10, 40)">
        <rect width="220" height="50" rx="8" fill="url(#nodeGradientRepo)" stroke="#10b981" stroke-width="1"/>
        <text x="110" y="30" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#d1fae5">CourseRepository</text>
      </g>
      <g transform="translate(10, 100)">
        <rect width="220" height="50" rx="8" fill="url(#nodeGradientRepo)" stroke="#10b981" stroke-width="1"/>
        <text x="110" y="30" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#d1fae5">CanvasRepository</text>
      </g>
    </g>
  </g>

  <!-- ================================================================================== -->
  <!-- COLUMN 4: NOTES & STUDY -->
  <!-- ================================================================================== -->
  <g transform="translate(1050, 180)">
    <rect width="280" height="1350" rx="24" fill="url(#uiCardGradient)" stroke="rgba(56, 189, 248, 0.2)" stroke-width="1" filter="url(#shadow)"/>
    <text x="140" y="40" text-anchor="middle" font-family="Inter, sans-serif" font-size="22" font-weight="700" fill="#e2e8f0">Notes &amp; Study</text>

    <!-- Views -->
    <g transform="translate(20, 80)">
      <rect width="240" height="300" rx="12" fill="rgba(56, 189, 248, 0.05)" stroke="#38bdf8" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#38bdf8" font-weight="600">SCREENS</text>
      
      <g transform="translate(10, 40)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">FlashcardScreen</text>
      </g>
      <g transform="translate(10, 80)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">TempFlashcardsGen/View</text>
      </g>
      <g transform="translate(10, 120)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">TempQuizGeneration</text>
      </g>
      <g transform="translate(10, 160)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">PodcastScreen</text>
      </g>
      <g transform="translate(10, 200)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">Receive/ShareNFCScreen</text>
      </g>
    </g>

    <!-- ViewModels -->
    <g transform="translate(20, 450)">
      <rect width="240" height="250" rx="12" fill="rgba(129, 140, 248, 0.05)" stroke="#818cf8" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#818cf8" font-weight="600">VIEWMODELS</text>

      <g transform="translate(10, 40)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">NotesViewModel</text>
      </g>
      <g transform="translate(10, 90)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">FlashcardViewModel</text>
      </g>
      <g transform="translate(10, 140)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">TempFlashcardViewModel</text>
      </g>
      <g transform="translate(10, 190)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">TempQuizViewModel</text>
      </g>
    </g>

    <!-- Repositories -->
    <g transform="translate(20, 900)">
      <rect width="240" height="240" rx="12" fill="rgba(52, 211, 153, 0.05)" stroke="#34d399" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#34d399" font-weight="600">REPOSITORIES</text>

      <g transform="translate(10, 40)">
        <rect width="220" height="50" rx="8" fill="url(#nodeGradientRepo)" stroke="#10b981" stroke-width="1"/>
        <text x="110" y="30" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#d1fae5">NotesRepository</text>
      </g>
      <g transform="translate(10, 100)">
        <rect width="220" height="50" rx="8" fill="url(#nodeGradientRepo)" stroke="#10b981" stroke-width="1"/>
        <text x="110" y="30" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#d1fae5">FlashcardRepository</text>
      </g>
      <g transform="translate(10, 160)">
        <rect width="220" height="50" rx="8" fill="url(#nodeGradientRepo)" stroke="#10b981" stroke-width="1"/>
        <text x="110" y="30" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#d1fae5">PodcastRepository</text>
      </g>
    </g>
  </g>

  <!-- ================================================================================== -->
  <!-- COLUMN 5: GROUPS -->
  <!-- ================================================================================== -->
  <g transform="translate(1350, 180)">
    <rect width="280" height="1350" rx="24" fill="url(#uiCardGradient)" stroke="rgba(56, 189, 248, 0.2)" stroke-width="1" filter="url(#shadow)"/>
    <text x="140" y="40" text-anchor="middle" font-family="Inter, sans-serif" font-size="22" font-weight="700" fill="#e2e8f0">Groups &amp; Chat</text>

    <!-- Views -->
    <g transform="translate(20, 80)">
      <rect width="240" height="240" rx="12" fill="rgba(56, 189, 248, 0.05)" stroke="#38bdf8" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#38bdf8" font-weight="600">SCREENS</text>
      
      <g transform="translate(10, 40)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">GroupScreen</text>
      </g>
      <g transform="translate(10, 80)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">GroupChatScreen</text>
      </g>
      <g transform="translate(10, 120)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">GroupDetailsOverlay</text>
      </g>
      <g transform="translate(10, 160)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">GroupInviteOverlay</text>
      </g>
    </g>

    <!-- ViewModels -->
    <g transform="translate(20, 450)">
      <rect width="240" height="200" rx="12" fill="rgba(129, 140, 248, 0.05)" stroke="#818cf8" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#818cf8" font-weight="600">VIEWMODELS</text>

      <g transform="translate(10, 40)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">GroupViewModel</text>
      </g>
      <g transform="translate(10, 90)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">AddGroupViewModel</text>
      </g>
      <g transform="translate(10, 140)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">GroupChatViewModel</text>
      </g>
    </g>

    <!-- Repositories -->
    <g transform="translate(20, 900)">
      <rect width="240" height="120" rx="12" fill="rgba(52, 211, 153, 0.05)" stroke="#34d399" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#34d399" font-weight="600">REPOSITORIES</text>

      <g transform="translate(10, 40)">
        <rect width="220" height="60" rx="8" fill="url(#nodeGradientRepo)" stroke="#10b981" stroke-width="1"/>
        <text x="110" y="30" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#d1fae5">GroupRepository</text>
      </g>
    </g>
  </g>

  <!-- ================================================================================== -->
  <!-- COLUMN 6: GAMES -->
  <!-- ================================================================================== -->
  <g transform="translate(1650, 180)">
    <rect width="280" height="1350" rx="24" fill="url(#uiCardGradient)" stroke="rgba(56, 189, 248, 0.2)" stroke-width="1" filter="url(#shadow)"/>
    <text x="140" y="40" text-anchor="middle" font-family="Inter, sans-serif" font-size="22" font-weight="700" fill="#e2e8f0">Games &amp; Multiplayer</text>

    <!-- Views -->
    <g transform="translate(20, 80)">
      <rect width="240" height="340" rx="12" fill="rgba(56, 189, 248, 0.05)" stroke="#38bdf8" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#38bdf8" font-weight="600">SCREENS</text>
      
      <g transform="translate(10, 40)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">GameScreen</text>
      </g>
      <g transform="translate(10, 80)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">GameLobbyScreen</text>
      </g>
      <g transform="translate(10, 120)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">GamePlayScreen</text>
      </g>
      <g transform="translate(10, 160)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">PlayQuizScreen</text>
      </g>
      <g transform="translate(10, 200)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">QuizGameScreen</text>
      </g>
      <g transform="translate(10, 240)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">StudyTacToeScreen</text>
      </g>
      <g transform="translate(10, 280)">
        <rect width="220" height="30" rx="6" fill="url(#nodeGradientUI)"/>
        <text x="110" y="20" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#e2e8f0">QuizGenerationScreen</text>
      </g>
    </g>

    <!-- ViewModels -->
    <g transform="translate(20, 450)">
      <rect width="240" height="350" rx="12" fill="rgba(129, 140, 248, 0.05)" stroke="#818cf8" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#818cf8" font-weight="600">VIEWMODELS</text>

      <g transform="translate(10, 40)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">GameViewModel</text>
      </g>
      <g transform="translate(10, 90)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">GameLobbyViewModel</text>
      </g>
      <g transform="translate(10, 140)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">GamePlayViewModel</text>
      </g>
      <g transform="translate(10, 190)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">QuizGameViewModel</text>
      </g>
      <g transform="translate(10, 240)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">StudyTacToeViewModel</text>
      </g>
      <g transform="translate(10, 290)">
        <rect width="220" height="40" rx="8" fill="url(#nodeGradientVM)" stroke="#6366f1" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#e0e7ff">StandaloneGameVM</text>
      </g>
    </g>

    <!-- Repositories -->
    <g transform="translate(20, 900)">
      <rect width="240" height="120" rx="12" fill="rgba(52, 211, 153, 0.05)" stroke="#34d399" stroke-width="1" stroke-dasharray="4,4"/>
      <text x="120" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="14" fill="#34d399" font-weight="600">REPOSITORIES</text>

      <g transform="translate(10, 40)">
        <rect width="220" height="60" rx="8" fill="url(#nodeGradientRepo)" stroke="#10b981" stroke-width="1"/>
        <text x="110" y="25" text-anchor="middle" font-family="Inter, sans-serif" font-size="13" font-weight="600" fill="#d1fae5">GameRepository</text>
        <text x="110" y="45" text-anchor="middle" font-family="Inter, sans-serif" font-size="11" fill="#a7f3d0">QuizRepository</text>
      </g>
    </g>
  </g>

  <!-- ================================================================================== -->
  <!-- EXTERNAL SERVICES ROW -->
  <!-- ================================================================================== -->
  <g transform="translate(150, 1600)">
    <!-- Firebase (Auth/DB) -->
    <g transform="translate(0, 0)">
        <rect width="280" height="100" rx="12" fill="url(#externalCardGradient)" stroke="#b91c1c" stroke-width="1"/>
        <text x="140" y="35" text-anchor="middle" font-family="Inter, sans-serif" font-size="16" font-weight="700" fill="#fca5a5">Firebase</text>
        <text x="140" y="60" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#fecaca">Auth &amp; Firestore</text>
    </g>

    <!-- Google Cloud -->
    <g transform="translate(300, 0)">
        <rect width="280" height="100" rx="12" fill="url(#externalCardGradient)" stroke="#b91c1c" stroke-width="1"/>
        <text x="140" y="35" text-anchor="middle" font-family="Inter, sans-serif" font-size="16" font-weight="700" fill="#fca5a5">Google Cloud</text>
        <text x="140" y="60" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#fecaca">Storage &amp; Functions</text>
    </g>

    <!-- Canvas LMS -->
    <g transform="translate(600, 0)">
        <rect width="280" height="100" rx="12" fill="url(#externalCardGradient)" stroke="#b91c1c" stroke-width="1"/>
        <text x="140" y="35" text-anchor="middle" font-family="Inter, sans-serif" font-size="16" font-weight="700" fill="#fca5a5">Canvas LMS</text>
        <text x="140" y="60" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#fecaca">Course API</text>
    </g>

    <!-- Gemini AI -->
    <g transform="translate(900, 0)">
        <rect width="280" height="100" rx="12" fill="url(#externalCardGradient)" stroke="#b91c1c" stroke-width="1"/>
        <text x="140" y="35" text-anchor="middle" font-family="Inter, sans-serif" font-size="16" font-weight="700" fill="#fca5a5">Gemini AI</text>
        <text x="140" y="60" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#fecaca">Generative AI</text>
    </g>

    <!-- Game Backend -->
    <g transform="translate(1500, 0)">
        <rect width="280" height="100" rx="12" fill="url(#externalCardGradient)" stroke="#b91c1c" stroke-width="1"/>
        <text x="140" y="35" text-anchor="middle" font-family="Inter, sans-serif" font-size="16" font-weight="700" fill="#fca5a5">Game Backend</text>
        <text x="140" y="60" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#fecaca">Ktor &amp; WebSockets</text>
    </g>
  </g>

  <!-- DATA FLOW CONNECTIONS -->
  <g id="Connections" stroke="#38bdf8" stroke-width="2" fill="none" opacity="0.6">
     <!-- View -> ViewModel -->
     <path d="M 290 440 L 290 630" marker-end="url(#arrowhead-flow)"/>
     <path d="M 590 380 L 590 630" marker-end="url(#arrowhead-flow)"/>
     <path d="M 890 420 L 890 630" marker-end="url(#arrowhead-flow)"/>
     <path d="M 1190 480 L 1190 630" marker-end="url(#arrowhead-flow)"/>
     <path d="M 1490 420 L 1490 630" marker-end="url(#arrowhead-flow)"/>
     <path d="M 1790 520 L 1790 630" marker-end="url(#arrowhead-flow)"/>

     <!-- ViewModel -> Repository -->
     <path d="M 290 830 L 290 1080" marker-end="url(#arrowhead-flow)"/>
     <path d="M 590 750 L 590 1080" marker-end="url(#arrowhead-flow)"/>
     <path d="M 890 830 L 890 1080" marker-end="url(#arrowhead-flow)"/>
     <path d="M 1190 880 L 1190 1080" marker-end="url(#arrowhead-flow)"/>
     <path d="M 1490 830 L 1490 1080" marker-end="url(#arrowhead-flow)"/>
     <path d="M 1790 980 L 1790 1080" marker-end="url(#arrowhead-flow)"/>

     <!-- Repository -> External -->
     <!-- Auth -> Firebase -->
     <path d="M 290 1200 L 290 1600" marker-end="url(#arrowhead-flow)"/>
     
     <!-- Tasks -> Firebase -->
     <path d="M 590 1200 L 290 1600" marker-end="url(#arrowhead-flow)"/>
     
     <!-- Courses -> Canvas -->
     <path d="M 890 1230 L 890 1600" marker-end="url(#arrowhead-flow)"/>
     
     <!-- Notes -> Firebase/Cloud/Gemini -->
     <path d="M 1190 1290 L 290 1600" marker-end="url(#arrowhead-flow)"/>
     <path d="M 1190 1290 L 590 1600" marker-end="url(#arrowhead-flow)"/>
     <path d="M 1190 1290 L 1190 1600" marker-end="url(#arrowhead-flow)"/>
     
     <!-- Groups -> Firebase -->
     <path d="M 1490 1200 L 290 1600" marker-end="url(#arrowhead-flow)"/>
     
     <!-- Games -> Backend -->
     <path d="M 1790 1200 L 1790 1600" marker-end="url(#arrowhead-flow)"/>
  </g>

</svg>
